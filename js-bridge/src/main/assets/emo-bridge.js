!function(){"use strict";var e="__getSupportedCmdList__",n="__onBridgeReady__";if(!window.EmoBridge){var o=window.EmoBridge=function(o){var t=function(e){var n=e.createElement("iframe");return n.style.display="none",e.documentElement.appendChild(n),n}(o),i={},d=1,r=[];function u(e){e.cmd?c(e.cmd,(function(n){if(n){var o={cmd:e.cmd,data:e.data};if("function"==typeof e.onResponse){var u="cb_"+d++,c={onResponse:e.onResponse,onFailed:e.onFailed},s=e.onTimeout;i[u]=c,o.responseId=u,"number"==typeof e.timeout&&e.timeout>0&&(c.timeoutId=setTimeout((function(){delete i[u],"function"==typeof s&&s()}),e.timeout))}r.push(o),t.src="emo://__QUEUE_MSG__/"}else e.onFailed&&e.onFailed("cmd is not supported.")})):e.onFailed&&e.onFailed("cmd is undefined.")}function c(o,t){o!=e&&o!=n?s((function(e){t(e.indexOf(o)>=0)})):t(!0)}function s(n){s.__cache?n(s.__cache):u({cmd:e,onResponse:function(e){s.__cache=e,n(e)}})}return{send:u,isCmdSupport:c,getSupportedCmdList:s,_fetchQueueFromNative:function(){var e=JSON.stringify(r);return r=[],e},_handleResponseFromNative:function(e){if(e&&e.responseId){var n=i[e.responseId];n&&(n.timeoutId&&clearTimeout(n.timeoutId),e.error?n.onFailed(e.error):n.onResponse(e.data),delete i[e.responseId])}}}}(document);o.send({cmd:n});var t=new Event("EmoBridgeReady");t.bridge=o,document.dispatchEvent(t)}}();
