!function(){"use strict";var e="__getSupportedCmdList__",n="__onBridgeReady__";if(!window.EmoBridge){var t=window.EmoBridge=function(t){var o=function(e){var n=e.createElement("iframe");return n.style.display="none",e.documentElement.appendChild(n),n}(t),d={},i=1,r=[];function c(e){var n=e.onFailed;e.cmd?u(e.cmd,(function(t){if(t){var c={cmd:e.cmd,data:e.data};if("function"==typeof e.onResponse){var u="cb_"+i++,s={onResponse:e.onResponse,onFailed:n};d[u]=s,c.responseId=u,"number"==typeof e.timeout&&e.timeout>0&&(s.timeoutId=setTimeout((function(){delete d[u],n&&n("cmd("+e.cmd+") timed out.")}),e.timeout))}r.push(c),o.src="emo://__QUEUE_MSG__/"}else n&&n("cmd("+e.cmd+") is not supported.")})):n&&n("cmd is undefined.")}function u(t,o){t!=e&&t!=n?s((function(e){o(e.indexOf(t)>=0)})):o(!0)}function s(n){s.__cache?n(s.__cache):c({cmd:e,onResponse:function(e){s.__cache=e,n(e)}})}return{send:c,isCmdSupport:u,getSupportedCmdList:s,_fetchQueueFromNative:function(){var e=r;return r=[],e},_handleResponseFromNative:function(e){if(e&&e.responseId){var n=d[e.responseId];n&&(n.timeoutId&&clearTimeout(n.timeoutId),e.error?n.onFailed&&n.onFailed(e.error):n.onResponse(e.data),delete d[e.responseId])}}}}(document);t.send({cmd:n});var o=new Event("EmoBridgeReady");o.bridge=t,document.dispatchEvent(o)}}();
